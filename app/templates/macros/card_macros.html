{% macro product_card(product) %}
<div class="product-card-reference position-relative">
    <!-- Add Button -->
    <button class="product-add-btn" 
            onclick="{% if product.quantity > 0 %}upSert({{ product.id }}, 1, 'add'){% endif %}"
            {% if product.quantity == 0 %}disabled{% endif %}
            title="Add to Cart">
        <i class="bi bi-cart-plus"></i>
    </button>
    
    <!-- Wishlist Heart -->
    <button class="product-wishlist-btn" 
            onclick="toggleWishlist({{ product.id }}, this)"
            title="Add to Wishlist">
        <i class="bi {{ 'bi-heart-fill' if product.is_wishlisted else 'bi-heart' }} wishlist-heart"
           data-product-id="{{ product.id }}"></i>
    </button>
    
    <!-- Out of Stock Overlay -->
    {% if product.quantity == 0 %}
    <div class="product-out-of-stock">
        <span>Out of Stock</span>
    </div>
    {% endif %}
    
    <!-- Product Image -->
    <a href="{{ url_for('user.product_details', product_id=product.id) }}" class="text-decoration-none">
        <div class="product-image-wrapper">
            <img src="{{ url_for('static', filename=product.image) }}" 
                 alt="{{ product.name }}" 
                 class="product-image">
        </div>
    </a>
    
    <!-- Product Info -->
    <div class="product-info">
        <a href="{{ url_for('user.product_details', product_id=product.id) }}" class="text-decoration-none">
            <h6 class="product-name">{{ product.name }}</h6>
        </a>
        <div class="product-sales">Sell {{ (product.quantity or 0) // 1000 }}k</div>
        <div class="product-price">â‚±{{ "{:,.2f}".format(product.price) }}</div>
    </div>
</div>
{% endmacro %}